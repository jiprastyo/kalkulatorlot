<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Kalkulator Lot</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.57.0/build/stlite.css" />
  </head>
  <body>
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.57.0/build/stlite.js"></script>
    <script>
      stlite.mount(
        {
          requirements: ["pandas", "numpy"], 
          entrypoint: "app.py",
          files: {
            "app.py": `
import streamlit as st
import pandas as pd

# Judul aplikasi diperbarui
st.title("Kalkulator Lot")

# Input Trading Plan
col1, col2 = st.columns(2)
with col1:
    price = st.number_input("Harga Beli (Entry)", value=1000, step=1)
    equity = st.number_input("Total Modal (IDR)", value=10000000, step=100000)
with col2:
    risk_pct = st.slider("Risk per Trade (%)", 0.5, 5.0, 1.0, 0.5)
    stop_loss_price = st.number_input("Harga Stop Loss", value=950, step=1)

# Logika Perhitungan Lot
risk_amount = equity * (risk_pct / 100)
risk_per_share = price - stop_loss_price

if risk_per_share > 0:
    total_shares = risk_amount / risk_per_share
    total_lots = int(total_shares / 100)
    total_investment = total_lots * 100 * price
    
    st.divider()
    st.subheader("Hasil Analisis")
    st.info(f"Maksimal Risk: Rp {risk_amount:,.0f}")
    st.success(f"Jumlah Lot: {total_lots} Lot")
    st.warning(f"Total Pembelian: Rp {total_investment:,.0f}")
else:
    st.error("Harga Stop Loss harus lebih rendah dari Harga Beli.")
            `,
          },
        },
        document.getElementById("root")
      );
    </script>
  </body>
</html>
